<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data: blob: http: https:; media-src 'self' data: blob: http: https:; style-src 'self' 'unsafe-inline'; script-src 'self'; connect-src 'self' http: https:;" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Jellify</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <div id="login" class="login-page">
        <div class="login-window-controls">
            <button class="login-win-btn" id="login-win-minimize">‚àí</button>
            <button class="login-win-btn" id="login-win-maximize">‚ñ°</button>
            <button class="login-win-btn close" id="login-win-close">‚úï</button>
        </div>
        <div class="login-content">
            <div class="login-hero">
                <div class="login-brand">
                    <div class="icon">
                        <img src="./icon.ico" alt="Jellify">
                    </div>
                    <h1>Jellify</h1>
                    <div class="tag">Premium music experience for your Jellyfin server</div>
                </div>
            </div>
            <div class="login-card">
            <div class="login-tabs">
                <div id="tab-server" class="login-tab active">Server</div>
                <div id="tab-login" class="login-tab">Credentials</div>
            </div>
            <div class="login-body">
                <div id="panel-server">
                    <div class="input-row"><input id="lf-server" placeholder="https://jellyfin.example.com" /></div>
                    <button id="lf-continue" class="btn-primary">Continue</button>
                </div>
                <div id="panel-login" class="hidden">
                    <div class="input-row"><input id="lf-user" placeholder="Username" /></div>
                    <div class="input-row">
                        <input id="lf-pass" type="password" placeholder="Password" />
                        <button id="lf-toggle" class="toggle">üëÅ</button>
                    </div>
                    <button id="lf-submit" class="btn-primary">Sign In</button>
                </div>
            </div>
            <div class="login-footer">Connect to your Jellyfin media server</div>
        </div>
        </div>
    </div>
    <div id="layout" class="layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <img src="./icon.ico" alt="Jellify" class="logo-icon">
                    <span class="logo-text">Jellify</span>
                </div>
            </div>
            
            <div class="sidebar-main">
                <nav class="nav">
                    <a href="#" class="nav-item" data-nav="home">
                        <svg class="icon" viewBox="0 0 24 24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
                        <span>Home</span>
                    </a>
                    <a href="#search" class="nav-item" data-nav="search">
                        <svg class="icon" viewBox="0 0 24 24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                        <span>Search</span>
                    </a>
                    <a href="#library" class="nav-item" data-nav="library">
                        <svg class="icon" viewBox="0 0 24 24" fill="currentColor"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z"/></svg>
                        <span>Your Library</span>
                    </a>
                </nav>
                
                <div class="sidebar-divider"></div>
                
                <nav class="nav sidebar-library">
                    <a href="#liked" class="nav-item nav-item-special" data-nav="liked">
                        <svg class="icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
                        <span>Liked Songs</span>
                    </a>
                </nav>
                
                <div class="sidebar-playlists-wrapper">
                    <div class="sidebar-playlists-header">
                        <span class="sidebar-section-title">PLAYLISTS</span>
                    </div>
                    <div class="sidebar-playlists" id="sidebar-playlists"></div>
                </div>
            </div>
            
            <div class="sidebar-footer">
                <div class="user-profile" id="sidebar-user">
                    <img id="sidebar-avatar" src="" alt="" />
                    <div class="user-info">
                        <span id="sidebar-username">User</span>
                    </div>
                </div>
            </div>
        </aside>
        <main class="main">
            <div class="topbar">
                <div class="topbar-nav">
                    <button class="nav-btn" id="nav-back" disabled>
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                    </button>
                    <button class="nav-btn" id="nav-forward" disabled>
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
                    </button>
                    <button class="search-btn">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                    </button>
                </div>
                <div class="topbar-right">
                    <button class="btn-upgrade" id="btn-create-playlist" title="Create Playlist">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                    </button>
                    <button class="btn-upgrade" id="btn-settings" title="Settings">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/></svg>
                    </button>
                    <div class="topbar-user" id="topbar-user">
                        <img id="topbar-avatar" src="" alt="" />
                    </div>
                    <div class="window-controls">
                        <button class="win-btn" id="win-minimize">‚àí</button>
                        <button class="win-btn" id="win-maximize">‚ñ°</button>
                        <button class="win-btn close" id="win-close">‚úï</button>
                    </div>
                </div>
            </div>
            <div id="app" class="content"></div>
        </main>
    </div>
    <div id="mediabar" class="mediabar">
        <div class="progress-wrapper">
            <span id="time-current">0:00</span>
            <div class="progress-line" id="progress-line">
                <div id="progress-fill"></div>
            </div>
            <span id="time-total">0:00</span>
        </div>
        <div class="bar-content">
            <div class="track-info">
                <img id="track-art" alt="" />
                <div class="meta">
                    <div id="track-title">Not Playing</div>
                    <div id="track-artist"></div>
                </div>
                <button id="likeBtn" class="like">‚ô°</button>
            </div>
            <div class="controls">
                <button id="shuffle">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"/></svg>
                </button>
                <button id="prev">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
                </button>
                <button id="playPause" class="primary">
                    <svg id="playIcon" viewBox="0 0 24 24" fill="currentColor" style="opacity: 1;"><path d="M8 5v14l11-7z"/></svg>
                    <svg id="pauseIcon" viewBox="0 0 24 24" fill="currentColor" style="opacity: 0; pointer-events: none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                </button>
                <button id="next">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
                </button>
                <button id="repeat">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"/></svg>
                </button>
            </div>
            <div class="right">
                <button id="lyricsBtn" title="Lyrics">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3h-7z"/></svg>
                </button>
                <button id="queueBtn">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"/></svg>
                </button>
                <button id="fullscreenBtn">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>
                </button>
                <div class="volume-control">
                    <button id="volumeIcon">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                    <div class="volume-slider" id="volume-slider">
                        <div id="volume-fill"></div>
                    </div>
                </div>
            </div>
        </div>
        <audio id="audio" crossorigin="anonymous"></audio>
    </div>
    <!-- Fullscreen Player -->
    <div id="fullscreen-player" class="fullscreen-player">
        <div class="fullscreen-bg"></div>
        <div class="fullscreen-content">
            <div class="fullscreen-header">
                <button class="fullscreen-close" id="fullscreen-close">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
                </button>
                <button class="fullscreen-lyrics-toggle" id="fullscreen-lyrics-toggle">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3h-7z"/></svg>
                    <span>Lyrics</span>
                </button>
            </div>
            <div class="fullscreen-body">
                <div class="fullscreen-main">
                    <div class="fullscreen-artwork">
                        <img id="fullscreen-art" src="" alt="" />
                    </div>
                    <div class="fullscreen-info">
                        <h1 id="fullscreen-title">Track Title</h1>
                        <h2 id="fullscreen-artist">Artist Name</h2>
                        <h3 id="fullscreen-album">Album Name</h3>
                    </div>
                    <div class="fullscreen-controls">
                        <div class="fullscreen-progress-wrapper">
                            <span id="fullscreen-time-current">0:00</span>
                            <div class="fullscreen-progress-line" id="fullscreen-progress-line">
                                <div id="fullscreen-progress-fill"></div>
                            </div>
                            <span id="fullscreen-time-total">0:00</span>
                        </div>
                        <div class="fullscreen-buttons">
                            <button id="fullscreen-shuffle" class="fullscreen-btn">
                                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"/></svg>
                            </button>
                            <button id="fullscreen-prev" class="fullscreen-btn">
                                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
                            </button>
                            <button id="fullscreen-play-pause" class="fullscreen-btn-play">
                                <svg id="fullscreen-play-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                                <svg id="fullscreen-pause-icon" viewBox="0 0 24 24" fill="currentColor" style="display: none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                            </button>
                            <button id="fullscreen-next" class="fullscreen-btn">
                                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
                            </button>
                            <button id="fullscreen-repeat" class="fullscreen-btn">
                                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"/></svg>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="fullscreen-lyrics" id="fullscreen-lyrics">
                    <div class="lyrics-container" id="lyrics-container">
                        <div class="lyrics-loading">Loading lyrics...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="create-playlist-modal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create new playlist</h2>
                <button class="modal-close" id="modal-close">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="playlist-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"/></svg>
                </div>
                <div class="form-group">
                    <input type="text" id="playlist-name" class="form-input" placeholder="My playlist" maxlength="100" autofocus />
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="btn-cancel-playlist">Cancel</button>
                <button class="btn-primary-modal" id="btn-save-playlist">Create</button>
            </div>
        </div>
    </div>
    
    <!-- Logout Confirmation Modal -->
    <div id="logout-modal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Log out?</h2>
                <button class="modal-close" id="logout-modal-close">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <p style="text-align: center; margin: 24px 0; color: rgba(255, 255, 255, 0.7);">
                    Are you sure you want to log out? You'll need to log in again to use Jellify.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="btn-cancel-logout">Cancel</button>
                <button class="btn-danger-modal" id="btn-confirm-logout">Log Out</button>
            </div>
        </div>
    </div>
    
    <div id="toast-container" class="toast-container"></div>
    <div id="queue-backdrop" class="queue-backdrop"></div>
    <div id="queue-panel" class="queue-panel">
        <div class="queue-header">
            <div class="queue-tabs">
                <button class="queue-tab active" id="tab-queue">Queue</button>
                <button class="queue-tab" id="tab-recent">Recently played</button>
            </div>
            <button class="queue-close" id="queue-close">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
            </button>
        </div>
        <div class="queue-content">
            <div id="queue-view" class="queue-view">
                <div class="queue-section">
                    <h3 class="queue-section-title">NOW PLAYING</h3>
                    <div id="now-playing-item" class="queue-item-placeholder">
                        No track playing
                    </div>
                </div>
                <div class="queue-section">
                    <h3 class="queue-section-title">
                        UP NEXT
                        <button class="clear-queue" id="clear-queue">
                            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
                        </button>
                    </h3>
                    <div id="up-next-list" class="queue-list">
                        <div class="queue-empty">Queue is empty</div>
                    </div>
                </div>
            </div>
            <div id="recent-view" class="queue-view hidden">
                <div class="queue-section">
                    <div id="recent-list" class="queue-list">
                        <div class="queue-empty">No recently played tracks</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="renderer.js"></script>
    <script src="player.js"></script>
    <script src="contextMenu.js"></script>
    <script src="discordIntegration.js"></script>
</body>
</html>


